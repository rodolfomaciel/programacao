<!-- <!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="#">
	<title>Video Stream</title>
	<style type="text/css"></style>
</head>
<body>
	<video width="720" controls autoplay>
		Stream nao suportado
	</video>
	<script type="text/javascript">
		navigator.getUserMedia = navigator.getUserMedia ||
                         navigator.webkitGetUserMedia ||
                         navigator.mozGetUserMedia;

		if (navigator.getUserMedia) {
		   navigator.getUserMedia({ audio: true, video: true },
		      function(stream) {
		         var video = document.querySelector('video');
		         video.src = window.URL.createObjectURL(stream);
		         video.onloadedmetadata = function(e) {
		           video.play();
		         };
		      },
		      function(err) {
		         console.log("The following error occurred: " + err.name);
		      }
		   );
		} else {
		   console.log("getUserMedia not supported");
		}
	</script>
</body>
</html> -->


    <html>
    <head>
    <meta charset="utf-8">
    <title>JS Bin</title>
    <script>
          navigator.getUserMedia = ( navigator.getUserMedia ||
                               navigator.webkitGetUserMedia ||
                               navigator.mozGetUserMedia ||
                               navigator.msGetUserMedia);
		var webcamStream;
		 
		 function startWebcam() {
		    if (navigator.getUserMedia) {
		        navigator.getUserMedia (
		            // constraints
		            {
		                video: true,
		                audio: true
		            },
		 
		            // successCallback
		            function(localMediaStream) {
		                var video = document.querySelector('video');
		                video.src = window.URL.createObjectURL(localMediaStream);
		                // We use the first webcam by default
		                webcamStream = localMediaStream.getTracks()[0];
		            },
		 
		            // errorCallback
		            function(err) {
		                console.log("The following error occurred: " + err);
		            }
		        );
		    } else {
		        console.log("getUserMedia not supported");
		    }
		}
		function stopWebcam() {
		    webcamStream.stop();
		}
		
    </script>
    </head>
    <body >
         <video width=720 height=360 id="video" controls autoplay></video>
         <button onclick="startWebcam();">Start Webcam</button>
     	 <button onclick="stopWebcam();">Stop Webcam</button>
    </body>
    </html>
